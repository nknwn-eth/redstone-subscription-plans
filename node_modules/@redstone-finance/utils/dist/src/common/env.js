"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getFromEnv = void 0;
const zod_1 = require("zod");
const runtime_1 = require("./runtime");
const getFromEnv = (name, schema, parseAsJSON = !!schema) => {
    const envValue = (0, runtime_1.isNodeRuntime)() ? process.env[name] : undefined;
    let envValueParsed = envValue;
    if (parseAsJSON && envValue) {
        try {
            envValueParsed = JSON.parse(envValue);
        }
        catch (_e) {
        }
    }
    try {
        return (schema ?? zod_1.z.string()).parse(envValueParsed);
    }
    catch (e) {
        console.error(`failed to parse ${name} env variable, value ${envValue}`);
        throw new Error(`failed to parse ${name} env variable`, { cause: e });
    }
};
exports.getFromEnv = getFromEnv;
//# sourceMappingURL=env.js.map