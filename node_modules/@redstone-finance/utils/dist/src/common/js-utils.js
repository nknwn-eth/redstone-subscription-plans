"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.waitForAllRecord = exports.toSafeRecord = void 0;
const toSafeRecord = (record, errorFn) => new Proxy(record, {
    get: (target, p) => {
        if (p === "then" || p === "toJSON") {
            return target[p];
        }
        else if (!Reflect.has(target, p) || target[p] === undefined) {
            throw errorFn(p);
        }
        return target[p];
    },
});
exports.toSafeRecord = toSafeRecord;
const waitForAllRecord = async (s) => {
    const keys = Object.keys(s);
    const promises = keys.map((k) => s[k]);
    const results = await Promise.all(promises);
    const result = {};
    for (let i = 0; i < keys.length; ++i) {
        result[keys[i]] = results[i];
    }
    return result;
};
exports.waitForAllRecord = waitForAllRecord;
//# sourceMappingURL=js-utils.js.map